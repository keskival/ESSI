:l add.o :l hex.o :l comp.o :l if.o :l int.o :l io.o :l stack.o :l loop.o :l mem.o :l mul.o
: save @ 104 ! begin dup 104 @ !b while 104 @ 1 + 104 ! repeat  ;
: print @ begin dup @b dup while putc 1 + repeat drop drop ;
: getline begin getc dup 10 - while repeat drop 0 ;
: compare @ 104 ! @ 108 ! begin 104 @ @b 108 @ @b - if 1 0 else 104 @ @b if 1 else 0 0 endif endif while
104 @ 1 + 104 ! 108 @ 1 + 108 ! repeat ; 
: print_room dup 1000 + @b print 48 print dup 4 * 1040 +
dup @b if 52 print endif
dup 1 + @b if 56 print endif
dup 2 + @b if 60 print endif
3 + @b if 64 print endif
drop 68 print ;
2000 0 begin dup 100 < while swap dup rot dup rot swap ! 4 + swap 200 + swap repeat drop drop
0 10 46 101 114 101 104 32 103 111 100 32 121 114 103 110 97 32 110 97 32 101 101 115 32 117 111 89
10 0 save
0 10 46 101 114 101 104 32 101 101 114 116 32 101 103 114 97 108 32 97 32 115 105 32 101 114 101 104
84 10 4 save
0 10 46 114 101 116 97 119 32 103 110 105 112 112 105 114 100 32 114 97 101 104 32 110 97 99 32 117
111 89 32 46 101 114 101 104 32 112 109 97 100 32 100 110 97 32 107 114 97 100 32 121 114 101 118 32 115
105 32 116 73 10 8 save

0 10 46 104 116 114 111 110 32 101 104 116 32 110 105 32 101 118 97 99 32 97 32 115 105 32 101 114 101 104
84 32 46 117 116 99 105 78 32 97 116 97 114 101 86 32 117 117 116 97 108 67 32 58 115 121 97 115 32 116
73 32 46 114 111 111 108 102 32 101 104 116 32 110 111 32 103 110 105 118 114 97 99 32 97 32 115 97 104
32 101 99 97 108 112 32 115 105 104 84 10 12 save
0 10 32 58 115 116 105 120 101 32 101 108 98 105 115 115 111 80 10 16 save
0 10 10 46 114 101 118 111 32 101 109 97 71 32 46 102 114 117 109 115 32 97 32 101 101 115 32 117 111
89 10 20 save
0 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 24 save
0 46 100 110 97 116 115 114 101 100 110 117 32 116 39 110 111 100 32 73 10 40 save
0 33 110 111 105 116 99 101 114 105 100 32 100 105 108 97 118 110 73 10 44 save
0 32 58 115 116 105 120 101 32 101 108 98 105 115 115 111 80 10 48 save
0 32 104 116 114 111 110 52 save
0 32 116 115 97 101 56 save
0 32 104 116 117 111 115 60 save
0 32 116 115 101 119 64 save
0 32 62 10 68 save

0 46 107 99 117 108 32 100 111 111 71 10
46 116 115 101 119 32 111 103 32 100 110 97 32 104 116 117 111 115 32 111 103 32
44 104 116 115 97 101 32 111 103 32 44 104 116 114 111 110 32 111 103 32 58 101 114
97 32 115 100 110 97 109 109 111 99 32 100 101 99 105 110 103 111 99 101 82 10 46
115 101 118 97 99 32 110 105 32 101 118 105 108 32 121 101 104 84 32 46 102 114 117
109 115 32 97 32 100 110 105 102 32 111 116 32 115 105 32 110 111 105 115 115 105
109 32 114 117 111 89 32 46 101 114 117 116 110 101 118 100 97 32 102 111 32 101
109 97 103 32 97 32 115 105 32 115 105 104 84 10 72 save
0 112 105 99 107 32 117 112 76 save
0 103 111 32 110 111 114 116 104 80 save
0 103 111 32 101 97 115 116 84 save
0 103 111 32 115 111 117 116 104 88 save
0 103 111 32 119 101 115 116 92 save

1 1000 !b 0 1001 !b 4 1002 !b 8 1003 !b 12 1004 !b 16 1005 !b
2 1044 !b 3 1045 !b 0 1046 !b 0 1047 !b
0 1048 !b 4 1049 !b 1 1050 !b 0 1051 !b
4 1052 !b 0 1053 !b 0 1054 !b 1 1055 !b
10 1056 !b 0 1057 !b 3 1058 !b 2 1059 !b
: game 24 print 72 print 1000 @b print_room begin
0 getline drop 96 save 96 92 compare if 96 88 compare if 96 84 compare if 96 80 compare if
40 print else
1000 @b 4 * 1040 + @b dup if 1000 !b else 44 print endif endif else 
1000 @b 4 * 1040 + 1 + @b dup if 1000 !b else 44 print endif endif else 
1000 @b 4 * 1040 + 2 + @b dup if 1000 !b else 44 print endif endif else 
1000 @b 4 * 1040 + 3 + @b dup if 1000 !b else 44 print endif endif
1000 @b dup 10 - while print_room repeat 20 print ;
game
